A. Section Header

Title: Already with Lyca?

Subtitle: Add credit to your account or renew your plan.

Purpose:
‚û° Clearly indicates this is for existing customers only

B. Action Selector (Primary Buttons)

Three mutually exclusive actions:

Button	Action Type	Internal Meaning
Top up (default active)	CTA	Add balance
Renew plan	CTA	Renew existing bundle
Switch to Pay monthly	CTA	Convert plan type

üîπ Behavior

Works like tabs

Only one action active at a time

Active state controls:

API endpoint

Redirect URL

Validation rules

C. MSISDN Input Field (Phone Number)

Structure

[ +44 ] [ Enter lyca number & get started ] [ ‚Üí ]

Element	Purpose
Country code (+44)	Fixed for UK
Input field	Lycamobile number (MSISDN)
Arrow button	Form submit trigger
D. Secondary CTA

Text: Track your usage on the go! Download our app ‚Üí

Type: Outbound link (App Store / Play Store)

2Ô∏è‚É£ Data Model (What the Form Captures)
{
  "countryCode": "+44",
  "msisdn": "7412345678",
  "action": "topup" | "renew" | "paymonthly",
  "source": "web"
}

3Ô∏è‚É£ Frontend Validation Logic
A. Number Validation

Before submission:

function validateMsisdn(number) {
  return /^[0-9]{9,10}$/.test(number);
}


Rules:

Numbers only

No spaces

UK mobile length

Cannot start with 0 (already implied by +44)

‚ùå Invalid ‚Üí show inline error
‚úÖ Valid ‚Üí proceed

B. Action State Handling
let selectedAction = 'topup';

buttons.forEach(btn => {
  btn.addEventListener('click', () => {
    selectedAction = btn.dataset.action;
    updateActiveUI(btn);
  });
});

4Ô∏è‚É£ Submission Logic (Critical Part)
A. Single Form ‚Üí Multiple Flows

When user clicks ‚Üí

submitForm() {
  if (!validateMsisdn(msisdn)) return;

  switch (selectedAction) {
    case 'topup':
      redirectToTopup(msisdn);
      break;
    case 'renew':
      redirectToRenew(msisdn);
      break;
    case 'paymonthly':
      redirectToPayMonthly(msisdn);
      break;
  }
}

B. Redirect-Based Submission (Lyca Pattern)

Lyca does NOT submit via HTML form POST.
It uses URL redirection with query params.

1Ô∏è‚É£ Top Up
/en/topup?msisdn=447412345678

2Ô∏è‚É£ Renew Plan
/en/renew?msisdn=447412345678

3Ô∏è‚É£ Switch to Pay Monthly
/en/pay-monthly?msisdn=447412345678


‚úî Backend validates:

Active SIM

Country

Account status

5Ô∏è‚É£ Error Handling Flow
Scenario	Handling
Invalid number	Inline validation message
Non-Lyca number	Backend error page
Suspended SIM	Backend message
API failure	Generic error redirect

Frontend only validates format, not ownership.

6Ô∏è‚É£ Accessibility & UX Notes

Buttons are role="tab"

Arrow button is actual <button>

Input supports inputmode="numeric"

Placeholder disappears on focus

Keyboard submit (Enter key supported)

7Ô∏è‚É£ How to Implement This in AEM EDS / Custom JS

If you want, I can next provide:
‚úÖ Exact JS logic for EDS block
‚úÖ Google Docs authoring structure for this form
‚úÖ EDS-compatible HTML generation in decorate(block)
‚úÖ Mock API for local testing

Just tell me which one you want next.